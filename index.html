<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>galimatias - URL parsing for Java</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>galimatias</h1>
        <h2>A URL parsing and normalization library written in Java.</h2>
        <a href="https://github.com/smola/galimatias"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a name="galimatias" class="anchor" href="#galimatias"><span class="octicon octicon-link"></span></a>galimatias</h1>

<p><a href="https://travis-ci.org/smola/galimatias"><img src="https://travis-ci.org/smola/galimatias.png?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/r/smola/galimatias?branch=master"><img src="https://coveralls.io/repos/smola/galimatias/badge.png?branch=master" alt="Coverage Status"></a></p>

<p>galimatias is a URL parsing and normalization library written in Java.</p>

<h3>
<a name="design-goals" class="anchor" href="#design-goals"><span class="octicon octicon-link"></span></a>Design goals</h3>

<ul>
<li>Parse URLs as browsers do, optionally enforcing compliance with old standards (i.e. RFC 3986,  RFC 2396).</li>
<li>Stay as close as possible to WHATWG's <a href="http://url.spec.whatwg.org/">URL Standard</a>.</li>
<li>Convenient fluent API with immutable URL objects.</li>
<li>Interoperable with java.net.URL and java.net.URI.</li>
<li>Minimal dependencies.</li>
</ul><h3>
<a name="gotchas" class="anchor" href="#gotchas"><span class="octicon octicon-link"></span></a>Gotchas</h3>

<p>galimatias is not a generic URI parser. It can parse any URI, but only schemes defined in the URL Standard (i.e. http, https, ftp, ws, wss, gopher, file) will be parsed as hierarchical URIs. For example, in <code>git://github.com/smola/galimatias.git</code> you'll be able to extract scheme (i.e. <code>git</code>) and scheme data (i.e. <code>//github.com/smola/galimatias.git</code>), but not host (i.e. <code>github.com</code>). <strong>This is intended.</strong> We cannot guarantee that applying a set of generic rules won't break certain kind of URIs, so we do not try with them. <strong>I will consider adding further support for other schemes if enough people provides solid use cases and testing. <a href="https://github.com/smola/galimatias/issues/8">You can check this issue</a> if you are interested.</strong></p>

<h2>
<a name="but-why" class="anchor" href="#but-why"><span class="octicon octicon-link"></span></a>But, why?</h2>

<p>galimatias started out of frustration with java.net.URL and java.net.URI. Both of them are good for basic use cases, but severely broken for others:</p>

<ul>
<li><p><strong><a href="http://stackoverflow.com/a/3771123/205607">java.net.URL.equals() is broken.</a></strong></p></li>
<li><p><strong>java.net.URI can pase only RFC 2396 URI syntax.</strong> <code>java.net.URI</code> will only parse a URI if it's strictly compliant with RFC 2396. Most URLs found in the wild do not comply with any syntax standard, and RFC 2396 is outdated anyway.</p></li>
<li><p><strong>java.net.URI is not protocol-aware.</strong> <code>http://example.com</code>, <code>http://example.com/</code> and <code>http://example.com:80</code> are different entities.</p></li>
<li><p><strong>Manipulation is a pain.</strong> I haven't seen any URL manipulation code using <code>java.net.URL</code> or <code>java.net.URI</code> that is simple and concise.</p></li>
<li><p><strong>Not IDN ready.</strong> Java has IDN support with <code>java.net.IDN</code>, but this does not apply to <code>java.net.URL</code> or <code>java.net.URI</code>.</p></li>
</ul><h2>
<a name="setup-with-maven" class="anchor" href="#setup-with-maven"><span class="octicon octicon-link"></span></a>Setup with Maven</h2>

<p>galimatias is available at Maven Central. Just add to your pom.xml <code>&lt;dependencies&gt;</code> section:</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>io.mola.galimatias<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>galimatias<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.1.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<p>Development snapshots are also available at Sonatype OSS Snapshots repository.</p>

<h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting started</h2>

<h3>
<a name="parse-a-url" class="anchor" href="#parse-a-url"><span class="octicon octicon-link"></span></a>Parse a URL</h3>

<div class="highlight highlight-java"><pre><span class="c1">// Parse</span>
<span class="n">String</span> <span class="n">urlString</span> <span class="o">=</span> <span class="c1">//...</span>
<span class="n">URL</span> <span class="n">url</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">urlString</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">GalimatiasParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// Do something with non-recoverable parsing error</span>
<span class="o">}</span>
</pre></div>

<h3>
<a name="convert-to-javaneturl" class="anchor" href="#convert-to-javaneturl"><span class="octicon octicon-link"></span></a>Convert to java.net.URL</h3>

<div class="highlight highlight-java"><pre><span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="c1">//...</span>
<span class="n">java</span><span class="o">.</span><span class="na">net</span><span class="o">.</span><span class="na">URL</span> <span class="n">javaURL</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">javaURL</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">toJavaURL</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">MalformedURLException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// This can happen if scheme is not http, https, ftp, file or jar.</span>
<span class="o">}</span>
</pre></div>

<h3>
<a name="convert-to-javaneturi" class="anchor" href="#convert-to-javaneturi"><span class="octicon octicon-link"></span></a>Convert to java.net.URI</h3>

<div class="highlight highlight-java"><pre><span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="c1">//...</span>
<span class="n">java</span><span class="o">.</span><span class="na">net</span><span class="o">.</span><span class="na">URI</span> <span class="n">javaURI</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">javaURI</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">toJavaURI</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">URISyntaxException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// This will happen in rare cases such as "foo://"</span>
<span class="o">}</span>
</pre></div>

<h3>
<a name="parse-a-url-with-strict-error-handling" class="anchor" href="#parse-a-url-with-strict-error-handling"><span class="octicon octicon-link"></span></a>Parse a URL with strict error handling</h3>

<p>You can use a strict error handler that will throw an exception
on any invalid URL, even if it's a recovarable error.</p>

<div class="highlight highlight-java"><pre><span class="n">URLParsingSettings</span> <span class="n">settings</span> <span class="o">=</span> <span class="n">URLParsingSettings</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
  <span class="o">.</span><span class="na">withErrorHandler</span><span class="o">(</span><span class="n">StrictErrorHandler</span><span class="o">.</span><span class="na">getInstance</span><span class="o">());</span>
<span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">settings</span><span class="o">,</span> <span class="n">urlString</span><span class="o">);</span>
</pre></div>

<h2>
<a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p>Check out the <a href="http://galimatias.mola.io/apidocs/0.1.0/">Javadoc</a>.</p>

<h2>
<a name="contribute" class="anchor" href="#contribute"><span class="octicon octicon-link"></span></a>Contribute</h2>

<p>Did you find a bug? <a href="https://github.com/smola/galimatias/issues">Report it on GitHub</a>.</p>

<p>Did you write a patch? Send a pull request.</p>

<p>Something else? Email me at <a href="mailto:santi@mola.io">santi@mola.io</a>.</p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Copyright (c) 2013-2014 Santiago M. Mola <a href="mailto:santi@mola.io">santi@mola.io</a></p>

<p>galimatias is released under the terms of the MIT License.</p>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-43666029-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
